dataType: Level
children:
  - dataType: GameObject
    geometry: DemoLevel.osgt
    position: {x: 0, y: 0, z: 0}
  - dataType: Controller
    radius: 5
    geometry: Switch.osgt
    position: {x: 0, y: 0, z: 0}
    functions:
      onInteraction: |
        void onInteraction(Controller@ self)
        {
        	self.sendMessage("toggle");
        }
        
    children:
      - dataType: ControlledObject
        geometry: SlidingDoor.osgt
        position: {x: 8, y: 0, z: 0}
        functions:
          onMessage_toggle: |
            void onMessage_toggle(ControlledObject@ self)
            {
                if(self.getStateName() == "closed")
                    self.changeState("open");
                else
                    self.changeState("closed");
            }
            
        children:
          - dataType: StateMachine
            children:
              - dataType: State
                name: closed
                functions:
                  onEnter: |
                    void onEnter(ControlledObject@ self)
                    {
                    	self.playAnimation("close");
                    	print("closing");
                    }
                    
              - dataType: State
                name: open
                functions:
                  onEnter: |
                    void onEnter(ControlledObject@ self)
                    {
                    	self.playAnimation("open");
                    	print("opening");
                    }
                    
  - dataType: Fighter
    maxHealth: 5
    team: Enemy
    geometry: humanmodelNoBones.osg
    position: {x: 5, y: 5, z: 0}
    resistances:
      dataType: unordered_map
      HOT: 0
      COLD: 0
      ACID: 0
    weapon:
      dataType: Weapon
      coolDownTime: 2.5
      geometry: staff.png
      position: {x: 0, y: 0, z: 1}
      projectile:
        dataType: Projectile
        geometry: circle.png
        position: {x: 0, y: 0, z: 0}
        children:
          - dataType: damage
            amount: 2
            type: PURE_MAGIC
  - dataType: Player
    maxHealth: 25
    team: Player
    geometry: humanmodelNoBones.osg
    position: {x: 2.970551, y: 0.3979353, z: -0.04000026}
    resistances:
      dataType: unordered_map
      COLD: 0
      HOT: 0
      ACID: 0
      PURE_MAGIC: 0
    weapon:
      dataType: Weapon
      coolDownTime: 2.5
      geometry: staff.png
      position: {x: 0, y: 0, z: 1}
      projectile:
        dataType: Projectile
        geometry: Fireball.png
        position: {x: 0, y: 0, z: 0}
        children:
          - dataType: damage
            amount: 2
            type: HOT